import{_ as w,r as O,c as u,o as m,b as l,a as o,w as n,F as f,e as y,f as V,h as U,i as z,t as a,d as h,j as E,U as B,I as H,J as N,E as D,K as F,V as J,W as S,X as j}from"./index-B6q5g7tU.js";/* empty css                  *//* empty css                        *//* empty css                     *//* empty css                 *//* empty css                         */import{_ as q}from"./header-nSCF0jj9.js";import"./bg-2-DQ5WRs7S.js";const K={components:{headers:q},data(){return{id:"",dialogVisible:!1,date1:new Date,num:1,peopleList:[{name:"",tel:"",idCard:""}],info:{images:""},hotel:[],radio1:"",pickerOptions:{disabledDate(i){return!1}}}},methods:{toOrder(){this.dialogVisible=!0},closeOrder(){this.date1=new Date,this.num=1,this.radio1="",this.peopleList=[{name:"",tel:"",idCard:""}],this.dialogVisible=!1},handleNumChange(i){if(i>this.peopleList.length){const e=i-this.peopleList.length;for(let d=0;d<e;d++)this.peopleList.push({name:"",tel:"",idCard:""})}else i<this.peopleList.length&&this.peopleList.splice(i)},saveOrder(){for(let e=0;e<this.peopleList.length;e++){const d=this.peopleList[e];if(!d.name){this.$message({message:`请完善预约人${e+1}姓名`,type:"warning"});return}if(!d.tel){this.$message({message:`请完善预约人${e+1}联系方式`,type:"warning"});return}if(!d.idCard){this.$message({message:`请完善预约人${e+1}证件号`,type:"warning"});return}}if(!this.date1){this.$message({message:"请选择预约时间",type:"warning"});return}if(!this.radio1){this.$message({message:"请选择房型",type:"warning"});return}const i={hotelId:this.id,num:this.num,itemId:this.radio1,time:this.date1,people:JSON.stringify(this.peopleList)};j(i).then(e=>{e.code===1e3?(this.$message({message:"预约成功，请等待确认",type:"success"}),this.closeOrder()):this.$message({message:e.message,type:"warning"})})},getHotelById(){S({id:this.id}).then(i=>{i.code===1e3&&(this.info=i.data,this.info.images||(this.info.images=""))})},getHotelItemList(){J({id:this.id}).then(i=>{i.code===1e3&&(this.hotel=i.data)})}},mounted(){this.id=this.$route.query.id,this.getHotelById(),this.getHotelItemList()}},P={class:"attractionsInfo"},R={class:"attractionsInfo1"},T={class:"attractionsInfo2"},W={class:"attractionsInfo3"},X=["src"],A={class:"attractionsInfo4"},G={class:"attractionsInfo5"},M={style:{"margin-top":"10px","margin-left":"20px"}},Q={style:{"margin-top":"10px","margin-left":"20px"}},Y={class:"attractionsInfo6"},Z={class:"attractionsInfo7",style:{"margin-left":"10px"}},$={class:"person-header",style:{"margin-bottom":"5px"}},ee={class:"person-fields"};function te(i,e,d,se,s,c){const I=O("headers"),C=U,x=z,_=E,k=B,v=H,L=N,g=D,b=F;return m(),u("div",P,[l(I),o("div",R,[o("div",T,[o("div",W,[l(x,{height:"500px"},{default:n(()=>[(m(!0),u(f,null,y(s.info.images.split(","),(t,p)=>(m(),V(C,{key:p},{default:n(()=>[o("img",{style:{width:"100%",height:"100%"},src:t},null,8,X)]),_:2},1024))),128))]),_:1})]),o("div",A,[o("div",G,a(s.info.name),1),o("div",M," 所属景区："+a(s.info.attractions),1),o("div",Q," 地址："+a(s.info.address),1),o("div",Y,a(s.info.introduce),1),o("div",Z,[l(_,{size:"small",type:"primary",plain:"",onClick:c.toOrder,style:{"font-size":"18px"}},{default:n(()=>e[4]||(e[4]=[h("立即预定")])),_:1,__:[4]},8,["onClick"])])])])]),l(b,{title:"预定",modelValue:s.dialogVisible,"onUpdate:modelValue":e[3]||(e[3]=t=>s.dialogVisible=t),width:"40%"},{footer:n(()=>[l(_,{onClick:c.closeOrder,size:"small"},{default:n(()=>e[5]||(e[5]=[h("取 消")])),_:1,__:[5]},8,["onClick"]),l(_,{type:"primary",onClick:c.saveOrder,size:"small"},{default:n(()=>e[6]||(e[6]=[h("确 定")])),_:1,__:[6]},8,["onClick"])]),default:n(()=>[o("div",null,[(m(!0),u(f,null,y(s.hotel,(t,p)=>(m(),V(k,{style:{"margin-top":"10px"},key:p,size:"small",modelValue:s.radio1,"onUpdate:modelValue":e[0]||(e[0]=r=>s.radio1=r),label:t.id,border:""},{default:n(()=>[h(a(t.name)+" - 数量"+a(t.num)+" - 价格"+a(t.price),1)]),_:2},1032,["modelValue","label"]))),128))]),l(v,{style:{"margin-top":"10px"},size:"small",modelValue:s.num,"onUpdate:modelValue":e[1]||(e[1]=t=>s.num=t),min:1,max:10,onChange:c.handleNumChange},null,8,["modelValue","onChange"]),l(L,{size:"small",style:{"margin-left":"20px","margin-top":"10px"},modelValue:s.date1,"onUpdate:modelValue":e[2]||(e[2]=t=>s.date1=t),type:"date",placeholder:"选择预定日期","picker-options":s.pickerOptions},null,8,["modelValue","picker-options"]),(m(!0),u(f,null,y(s.peopleList,(t,p)=>(m(),u("div",{class:"attractionsInfo9",key:p,style:{"margin-top":"10px"}},[o("div",$,[o("span",null,"预约人 "+a(p+1),1)]),o("div",ee,[l(g,{size:"small",modelValue:t.name,"onUpdate:modelValue":r=>t.name=r,placeholder:"请输入姓名"},null,8,["modelValue","onUpdate:modelValue"]),l(g,{size:"small",style:{"margin-left":"10px"},modelValue:t.tel,"onUpdate:modelValue":r=>t.tel=r,placeholder:"请输入电话"},null,8,["modelValue","onUpdate:modelValue"]),l(g,{size:"small",style:{"margin-left":"10px"},modelValue:t.idCard,"onUpdate:modelValue":r=>t.idCard=r,placeholder:"请输入身份证号"},null,8,["modelValue","onUpdate:modelValue"])])]))),128))]),_:1},8,["modelValue"])])}const pe=w(K,[["render",te],["__scopeId","data-v-6289559a"]]);export{pe as default};
