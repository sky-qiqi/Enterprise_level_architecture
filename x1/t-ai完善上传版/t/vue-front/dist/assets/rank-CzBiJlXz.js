import{_ as N,Z as r,ap as B,$ as I,C as S,c,o as s,a as n,b as o,f as k,H as u,w as i,D,G as P,aq as $,P as z,d as U,t as g,F as j,e as q,ar as G,a1 as H,as as M,at as Z,au as J,av as K,aw as O}from"./index-B6q5g7tU.js";/* empty css                *//* empty css                     *//* empty css               *//* empty css                    */const Q={class:"rank-page"},W={key:0},X={key:1,class:"empty-tip"},Y={class:"guess-section"},ee=["src"],ae={class:"guess-title"},te={class:"guess-desc"},oe={key:0,class:"guess-loading"},se={key:1,class:"empty-tip"},ne={__name:"rank",setup(le){const d=r([]),_=r(!1),p=r([]),v=r(!1),R=B(),f=r("attractions"),y=r([]),b=async()=>{_.value=!0;try{const e=await J();console.log("rankRes",e);let t=Array.isArray(e.data)?e.data:[];t.forEach((l,h)=>l.rank=h+1),d.value=t}catch(e){console.error("fetchRankList error:",e),d.value=[]}finally{_.value=!1}},E=async()=>{v.value=!0;try{const e=await K();console.log("recommendList",e.data),p.value=e.data||[]}catch{p.value=[]}finally{v.value=!1}},w=e=>{R.push(`/lineInfo?id=${e.id}`)};I(()=>{b(),E(),x()});const x=async()=>{var t;const e=await S({pageNum:1,pageSize:100});e.code===1e3&&Array.isArray((t=e.data)==null?void 0:t.list)&&(y.value=e.data.list.map(l=>l.line_id))};function T(e){return e?Array.isArray(e)?e[0]:typeof e=="string"&&e.includes(",")?e.split(",")[0]:e:""}return(e,t)=>{const l=D,h=P,m=$,L=O,C=Z,V=H,A=G,F=M;return s(),c("div",Q,[t[2]||(t[2]=n("h2",null,"排行榜",-1)),o(h,{modelValue:f.value,"onUpdate:modelValue":t[0]||(t[0]=a=>f.value=a),onTabClick:b},{default:i(()=>[o(l,{label:"景点排行榜",name:"attractions"}),o(l,{label:"路线排行榜",name:"routes"})]),_:1},8,["modelValue"]),!_.value&&d.value.length?(s(),k(L,{key:0,data:d.value,style:{width:"100%","margin-top":"20px"},onRowClick:w},{default:i(()=>[o(m,{prop:"rank",label:"排名",width:"80"}),o(m,{prop:"name",label:f.value==="attractions"?"景点名称":"路线名称"},null,8,["label"]),o(m,{prop:"favorCount",label:"收藏量",width:"120"},{default:i(a=>[n("span",{style:z({color:y.value.includes(a.row.id)?"red":""})},[U(g(a.row.favorCount)+" ",1),y.value.includes(a.row.id)?(s(),c("span",W,"（已收藏）")):u("",!0)],4)]),_:1}),o(m,{prop:"orderCount",label:"预定量",width:"120"})]),_:1},8,["data"])):u("",!0),!_.value&&!d.value.length?(s(),c("div",X,"暂无数据")):u("",!0),_.value?(s(),k(C,{key:2,rows:5,animated:"",style:{"margin-top":"20px"}})):u("",!0),n("div",Y,[t[1]||(t[1]=n("h3",null,"猜你喜欢",-1)),o(F,{gutter:16},{default:i(()=>[(s(!0),c(j,null,q(p.value,a=>(s(),k(A,{key:a.id,span:8},{default:i(()=>[o(V,{class:"guess-card",shadow:"hover",onClick:re=>w(a),style:{cursor:"pointer"}},{default:i(()=>[n("img",{src:T(a.images),style:{width:"100%",height:"100px","object-fit":"cover"}},null,8,ee),n("div",ae,g(a.name),1),n("div",te,g(a.desc||a.description||a.intro||a.introduce||"暂无简介"),1)]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1}),v.value?(s(),c("div",oe,[o(C,{rows:2,animated:""})])):u("",!0),!v.value&&!p.value.length?(s(),c("div",se,"暂无推荐")):u("",!0)])])}}},pe=N(ne,[["__scopeId","data-v-f5992b71"]]);export{pe as default};
