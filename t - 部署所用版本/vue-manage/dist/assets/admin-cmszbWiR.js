import{_ as be,s as T,q as g,v as xe,r,d as Ve,o as V,a as s,b as l,w as t,h as u,c as N,e as A,t as ye,ao as ze,G as c,ap as ke,aq as Ue,L as K,ar as Ce,H as Ne,as as Ae,at as qe}from"./index-Ck829hgR.js";const he={class:"user"},Se={class:"search-table"},Be={class:"search"},De={class:"table"},Pe={style:{width:"100%"}},Re={style:{width:"100%"}},Fe={style:{width:"100%"}},Te={style:{width:"100%"}},Ee={style:{width:"100%"}},Ie={style:{width:"100%"}},$e={style:{width:"100%"}},Me={slot:"footer",class:"dialog-footer"},Ge={style:{width:"100%"}},He={style:{width:"100%"}},Le={style:{width:"100%"}},je={style:{width:"100%"}},Je={style:{width:"100%"}},Ke={style:{width:"100%"}},Oe={slot:"footer",class:"dialog-footer"},Qe={class:"dialog-footer"},We={__name:"admin",setup(Xe){const m=T({userName:"",tel:"",status:"",userType:0,pageNumber:1,pageSize:10}),E=g([]),I=g(0),O=g(!0),$=g([]),Q=g([]),W=g(""),y=g(!1),z=g(!1),k=g(!1),q=g(""),h=g(""),x=g(""),d=T({userName:"",loginAccount:"",userType:0,email:"",tel:"",sex:"",avatar:"",password:"",status:"0",remark:""}),X={userName:[{required:!0,message:"请输入用户昵称",trigger:"blur"}],loginAccount:[{required:!0,message:"请输入登录账号",trigger:"blur"}],password:[{required:!0,message:"请输入登录密码",trigger:"blur"}],tel:[{required:!0,message:"请输入联系方式",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"}],sex:[{required:!0,message:"请选择性别",trigger:"blur"}]},M=g(null),n=T({userName:"",loginAccount:"",userType:0,email:"",tel:"",sex:"",avatar:"",password:"",status:"0",remark:""}),Y={userName:[{required:!0,message:"请输入用户昵称",trigger:"blur"}],loginAccount:[{required:!0,message:"请输入登录账号",trigger:"blur"}],password:[{required:!0,message:"请输入登录密码",trigger:"blur"}],tel:[{required:!0,message:"请输入联系方式",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"}],sex:[{required:!0,message:"请选择性别",trigger:"blur"}]},G=g(null),v=async()=>{try{const a=await ze(m);a.code===1e3?(E.value=a.data.records,I.value=a.data.total,O.value=!1):c.error({title:"错误",message:a.message})}catch(a){console.error(a)}},Z=()=>{m.userName="",m.tel="",m.status="",v()},ee=a=>{m.pageSize=a,v()},le=a=>{m.pageNumber=a,v()},te=a=>{$.value=a.map(e=>e.id),Q.value=a.map(e=>e.id)},oe=a=>{const[e,p,i]=a.split("#");switch(p){case"edit":me(e);break;case"pass":q.value=i,de(e);break;case"remove":ae(e);break}},ae=a=>{Ne.confirm("确定删除选中的数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>se(a))},se=async a=>{try{const e=await qe({ids:a});e.code===1e3?(K.success("删除成功"),v()):c.error({title:"错误",message:e.message})}catch(e){console.error(e)}},de=a=>{h.value=a,k.value=!0},S=()=>{q.value="",h.value="",x.value="",k.value=!1},ne=async()=>{if(!x.value.trim()){K.warning("请输入新密码");return}try{const a=await Ce({id:h.value,newPassword:x.value});a.code===1e3?(c.success({title:"成功",message:"重置成功"}),S()):c.error({title:"错误",message:a.message})}catch(a){console.error(a)}},re=()=>{y.value=!0},B=()=>{y.value=!1,ue()},ue=()=>{d.userName="",d.loginAccount="",d.email="",d.tel="",d.sex="",d.password="",d.status="0",d.remark=""},ie=()=>{M.value.validate(a=>{if(a)ke(d).then(e=>{e.code===1e3?(c.success({title:"成功",message:"保存成功"}),B(),v()):c.error({title:"错误",message:e.message})});else return!1})},me=a=>{W.value=a,Ae({id:a}).then(e=>{e.code===1e3?(n.userName=e.data.userName,n.loginAccount=e.data.loginAccount,n.email=e.data.email,n.tel=e.data.tel,n.sex=e.data.sex+"",n.status=e.data.status+"",n.remark=e.data.remark):c.error({title:"错误",message:e.message})}),z.value=!0},D=()=>{z.value=!1},pe=()=>{G.value.validate(a=>{if(a)Ue(n).then(e=>{e.code===1e3?(c.success({title:"成功",message:"保存成功"}),D(),v()):c.error({title:"错误",message:e.message})});else return!1})};return xe(()=>{v()}),(a,e)=>{const p=r("el-input"),i=r("el-col"),b=r("el-option"),P=r("el-select"),_=r("el-button"),U=r("el-row"),ge=r("Plus"),H=r("el-icon"),fe=r("Delete"),w=r("el-table-column"),L=r("el-tag"),R=r("el-dropdown-item"),_e=r("el-dropdown-menu"),ce=r("el-dropdown"),ve=r("el-table"),we=r("el-pagination"),f=r("el-form-item"),C=r("el-radio"),j=r("el-radio-group"),J=r("el-form"),F=r("el-dialog");return V(),Ve("div",he,[s("div",Se,[s("div",Be,[l(U,{gutter:10,style:{padding:"10px"}},{default:t(()=>[l(i,{xs:24,sm:12,md:8,lg:8,xl:8},{default:t(()=>[e[20]||(e[20]=s("span",{class:"search-title"},"用户名称:",-1)),l(p,{style:{"margin-top":"10px"},size:"mini",placeholder:"请输入用户名称",modelValue:m.userName,"onUpdate:modelValue":e[0]||(e[0]=o=>m.userName=o)},null,8,["modelValue"])]),_:1}),l(i,{xs:24,sm:12,md:8,lg:8,xl:8},{default:t(()=>[e[21]||(e[21]=s("span",{class:"search-title"},"手机号码:",-1)),l(p,{style:{"margin-top":"10px"},size:"mini",placeholder:"请输入手机号码",modelValue:m.tel,"onUpdate:modelValue":e[1]||(e[1]=o=>m.tel=o)},null,8,["modelValue"])]),_:1}),l(i,{xs:24,sm:12,md:8,lg:8,xl:8},{default:t(()=>[e[22]||(e[22]=s("span",{class:"search-title"},"状态:",-1)),l(P,{clearable:"",style:{"margin-top":"10px"},size:"mini",modelValue:m.status,"onUpdate:modelValue":e[2]||(e[2]=o=>m.status=o),placeholder:"请选择"},{default:t(()=>[l(b,{label:"正常",value:"0"}),l(b,{label:"停用",value:"1"})]),_:1},8,["modelValue"])]),_:1}),l(i,{xs:24,sm:12,md:8,lg:8,xl:8},{default:t(()=>[l(_,{style:{"margin-top":"10px"},size:"mini",type:"primary",onClick:v,icon:"Search"},{default:t(()=>e[23]||(e[23]=[u("查询")])),_:1}),l(_,{style:{"margin-top":"10px"},size:"mini",onClick:Z,icon:"Refresh"},{default:t(()=>e[24]||(e[24]=[u("重置")])),_:1})]),_:1})]),_:1})]),s("div",De,[l(U,{style:{"padding-top":"10px","margin-left":"10px"}},{default:t(()=>[l(_,{type:"primary",size:"mini",plain:"",onClick:re},{default:t(()=>[l(H,null,{default:t(()=>[l(ge)]),_:1}),e[25]||(e[25]=u("新增"))]),_:1}),l(_,{type:"danger",disabled:$.value.length<=0,size:"mini",plain:"",onClick:a.deleteDataBtn},{default:t(()=>[l(H,null,{default:t(()=>[l(fe)]),_:1}),e[26]||(e[26]=u("删除 "))]),_:1},8,["disabled","onClick"])]),_:1}),l(ve,{data:E.value,onSelectionChange:te,stripe:"",style:{width:"100%"}},{default:t(()=>[l(w,{type:"selection",width:"55"}),l(w,{prop:"userName",label:"用户名称",width:"150"}),l(w,{prop:"loginAccount",label:"登录账号",width:"150"}),l(w,{prop:"tel",label:"手机号",width:"150"}),l(w,{prop:"status",label:"状态",width:"100"},{default:t(o=>[o.row.status==0?(V(),N(L,{key:0},{default:t(()=>e[27]||(e[27]=[u("正常")])),_:1})):A("",!0),o.row.status==1?(V(),N(L,{key:1,type:"warning"},{default:t(()=>e[28]||(e[28]=[u("停用")])),_:1})):A("",!0)]),_:1}),l(w,{prop:"createTime",label:"创建时间"}),l(w,{label:"操作"},{default:t(o=>[l(ce,{trigger:"hover",onCommand:oe},{dropdown:t(()=>[l(_e,null,{default:t(()=>[l(R,{command:`${o.row.id}#edit`,icon:"Edit"},{default:t(()=>e[29]||(e[29]=[u("修改")])),_:2},1032,["command"]),o.row.loginAccount!=="admin"?(V(),N(R,{key:0,command:`${o.row.id}#pass#${o.row.userName}`,icon:"Check"},{default:t(()=>e[30]||(e[30]=[u("重置密码")])),_:2},1032,["command"])):A("",!0),o.row.loginAccount!=="admin"?(V(),N(R,{key:1,command:`${o.row.id}#remove`,icon:"Delete"},{default:t(()=>e[31]||(e[31]=[u("删除")])),_:2},1032,["command"])):A("",!0)]),_:2},1024)]),default:t(()=>[e[32]||(e[32]=s("span",{class:"el-dropdown-link"},[u(" 操作"),s("i",{class:"el-icon-arrow-down el-icon--right"})],-1))]),_:2},1024)]),_:1})]),_:1},8,["data"]),l(we,{background:"",layout:"total, prev, pager, next","page-sizes":[20,30,50,100],"page-size":m.pageSize,"current-page":m.pageNumber,onSizeChange:ee,onCurrentChange:le,total:I.value},null,8,["page-size","current-page","total"])])]),l(F,{title:"新增管理员",width:"40%","destroy-on-close":!0,modelValue:y.value,"onUpdate:modelValue":e[10]||(e[10]=o=>y.value=o),"before-close":B},{default:t(()=>[l(J,{model:d,rules:X,ref_key:"addRuleForm",ref:M},{default:t(()=>[l(U,{gutter:10},{default:t(()=>[l(i,{xs:24,sm:24,md:24,lg:24,xl:24},{default:t(()=>[s("div",Pe,[l(f,{prop:"userName",label:"昵称"},{default:t(()=>[l(p,{modelValue:d.userName,"onUpdate:modelValue":e[3]||(e[3]=o=>d.userName=o),size:"mini",placeholder:"请输入用户昵称",autocomplete:"off"},null,8,["modelValue"])]),_:1})])]),_:1}),l(i,{xs:24,sm:24,md:24,lg:24,xl:24},{default:t(()=>[s("div",Re,[l(f,{prop:"tel",label:"号码"},{default:t(()=>[l(p,{modelValue:d.tel,"onUpdate:modelValue":e[4]||(e[4]=o=>d.tel=o),size:"mini",placeholder:"请输入手机号码",autocomplete:"off"},null,8,["modelValue"])]),_:1})])]),_:1}),l(i,{xs:24,sm:24,md:24,lg:24,xl:24},{default:t(()=>[s("div",Fe,[l(f,{prop:"email",label:"邮箱"},{default:t(()=>[l(p,{modelValue:d.email,"onUpdate:modelValue":e[5]||(e[5]=o=>d.email=o),size:"mini",placeholder:"请输入邮箱",autocomplete:"off"},null,8,["modelValue"])]),_:1})])]),_:1}),l(i,{xs:24,sm:24,md:24,lg:24,xl:24},{default:t(()=>[s("div",Te,[l(f,{prop:"loginAccount",label:"账号"},{default:t(()=>[l(p,{modelValue:d.loginAccount,"onUpdate:modelValue":e[6]||(e[6]=o=>d.loginAccount=o),size:"mini",placeholder:"请输入登录账号",autocomplete:"off"},null,8,["modelValue"])]),_:1})])]),_:1}),l(i,{xs:24,sm:24,md:24,lg:24,xl:24},{default:t(()=>[s("div",Ee,[l(f,{prop:"password",label:"密码"},{default:t(()=>[l(p,{modelValue:d.password,"onUpdate:modelValue":e[7]||(e[7]=o=>d.password=o),"show-password":"",size:"mini",placeholder:"请输入用户密码",autocomplete:"off"},null,8,["modelValue"])]),_:1})])]),_:1}),l(i,{xs:24,sm:24,md:24,lg:24,xl:24},{default:t(()=>[s("div",Ie,[l(f,{prop:"sex",label:"性别"},{default:t(()=>[l(P,{size:"mini",modelValue:d.sex,"onUpdate:modelValue":e[8]||(e[8]=o=>d.sex=o),placeholder:"请选择用户性别"},{default:t(()=>[l(b,{label:"男",value:"0"}),l(b,{label:"女",value:"1"})]),_:1},8,["modelValue"])]),_:1})])]),_:1}),l(i,{xs:24,sm:24,md:24,lg:24,xl:24},{default:t(()=>[s("div",$e,[l(f,{prop:"status",label:"状态"},{default:t(()=>[l(j,{modelValue:d.status,"onUpdate:modelValue":e[9]||(e[9]=o=>d.status=o)},{default:t(()=>[l(C,{label:"0"},{default:t(()=>e[33]||(e[33]=[u("正常")])),_:1}),l(C,{label:"1"},{default:t(()=>e[34]||(e[34]=[u("停用")])),_:1})]),_:1},8,["modelValue"])]),_:1})])]),_:1})]),_:1})]),_:1},8,["model"]),s("div",Me,[l(_,{size:"mini",type:"primary",onClick:ie},{default:t(()=>e[35]||(e[35]=[u("确 定")])),_:1}),l(_,{size:"mini",onClick:B},{default:t(()=>e[36]||(e[36]=[u("取 消")])),_:1})])]),_:1},8,["modelValue"]),l(F,{title:"修改管理员",width:"40%","destroy-on-close":!0,modelValue:z.value,"onUpdate:modelValue":e[17]||(e[17]=o=>z.value=o),"before-close":D},{default:t(()=>[l(J,{model:n,rules:Y,ref_key:"updateRuleForm",ref:G},{default:t(()=>[l(U,{gutter:10},{default:t(()=>[l(i,{xs:24,sm:24,md:24,lg:24,xl:24},{default:t(()=>[s("div",Ge,[l(f,{prop:"userName",label:"昵称"},{default:t(()=>[l(p,{modelValue:n.userName,"onUpdate:modelValue":e[11]||(e[11]=o=>n.userName=o),size:"mini",placeholder:"请输入用户昵称",autocomplete:"off"},null,8,["modelValue"])]),_:1})])]),_:1}),l(i,{xs:24,sm:24,md:24,lg:24,xl:24},{default:t(()=>[s("div",He,[l(f,{prop:"tel",label:"号码"},{default:t(()=>[l(p,{modelValue:n.tel,"onUpdate:modelValue":e[12]||(e[12]=o=>n.tel=o),size:"mini",placeholder:"请输入手机号码",autocomplete:"off"},null,8,["modelValue"])]),_:1})])]),_:1}),l(i,{xs:24,sm:24,md:24,lg:24,xl:24},{default:t(()=>[s("div",Le,[l(f,{prop:"email",label:"邮箱"},{default:t(()=>[l(p,{modelValue:n.email,"onUpdate:modelValue":e[13]||(e[13]=o=>n.email=o),size:"mini",placeholder:"请输入邮箱",autocomplete:"off"},null,8,["modelValue"])]),_:1})])]),_:1}),l(i,{xs:24,sm:24,md:24,lg:24,xl:24},{default:t(()=>[s("div",je,[l(f,{prop:"loginAccount",label:"账号"},{default:t(()=>[l(p,{modelValue:n.loginAccount,"onUpdate:modelValue":e[14]||(e[14]=o=>n.loginAccount=o),size:"mini",placeholder:"请输入登录账号",autocomplete:"off"},null,8,["modelValue"])]),_:1})])]),_:1}),l(i,{xs:24,sm:24,md:24,lg:24,xl:24},{default:t(()=>[s("div",Je,[l(f,{prop:"sex",label:"性别"},{default:t(()=>[l(P,{size:"mini",modelValue:n.sex,"onUpdate:modelValue":e[15]||(e[15]=o=>n.sex=o),placeholder:"请选择用户性别"},{default:t(()=>[l(b,{label:"男",value:"0"}),l(b,{label:"女",value:"1"})]),_:1},8,["modelValue"])]),_:1})])]),_:1}),l(i,{xs:24,sm:24,md:24,lg:24,xl:24},{default:t(()=>[e[39]||(e[39]=s("span",{class:"search-title"},"状态:",-1)),s("div",Ke,[l(f,{prop:"status",style:{"margin-bottom":"0"}},{default:t(()=>[l(j,{style:{"margin-top":"1px",height:"40px",display:"flex","align-items":"center"},modelValue:n.status,"onUpdate:modelValue":e[16]||(e[16]=o=>n.status=o)},{default:t(()=>[l(C,{label:"0"},{default:t(()=>e[37]||(e[37]=[u("正常")])),_:1}),l(C,{label:"1"},{default:t(()=>e[38]||(e[38]=[u("停用")])),_:1})]),_:1},8,["modelValue"])]),_:1})])]),_:1})]),_:1})]),_:1},8,["model"]),s("div",Oe,[l(_,{size:"mini",type:"primary",onClick:pe},{default:t(()=>e[40]||(e[40]=[u("确 定")])),_:1}),l(_,{size:"mini",onClick:D},{default:t(()=>e[41]||(e[41]=[u("取 消")])),_:1})])]),_:1},8,["modelValue"]),l(F,{modelValue:k.value,"onUpdate:modelValue":e[19]||(e[19]=o=>k.value=o),title:"重置密码",width:"30%","before-close":S},{footer:t(()=>[s("span",Qe,[l(_,{size:"small",onClick:S},{default:t(()=>e[42]||(e[42]=[u("取 消")])),_:1}),l(_,{size:"small",type:"primary",onClick:ne},{default:t(()=>e[43]||(e[43]=[u("确 定")])),_:1})])]),default:t(()=>[s("span",null,"请输入"+ye(q.value)+"的新密码：",1),l(p,{style:{"margin-top":"10px"},"show-password":"",modelValue:x.value,"onUpdate:modelValue":e[18]||(e[18]=o=>x.value=o),size:"small",autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["modelValue"])])}}},Ze=be(We,[["__scopeId","data-v-038e37fd"]]);export{Ze as default};
