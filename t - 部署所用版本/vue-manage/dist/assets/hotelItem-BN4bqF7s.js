import{_ as Z,q as p,s as H,v as ee,r as d,x as le,d as te,o as q,a as i,b as l,w as t,h as m,y as A,z as oe,A as ae,B as ne,c as se,$ as re,L as r,H as de,a0 as ie,a1 as ue,a2 as me,a3 as pe}from"./index-Ck829hgR.js";const ce={class:"_item"},fe={class:"search-table"},_e={class:"search"},ge={class:"table"},ve={style:{width:"100%"}},ye={style:{width:"100%"}},be={style:{width:"100%"}},he={slot:"footer",class:"dialog-footer",style:{"text-align":"right"}},xe={style:{width:"100%"}},Ve={style:{width:"100%"}},ze={style:{width:"100%"}},we={slot:"footer",class:"dialog-footer",style:{"text-align":"right"}},Ce={__name:"hotelItem",setup(Ie){const x=p(!0),v=p([]),E=p(""),y=p(!1),b=p(!1),z=p(0),w=p([]),C=p(null),I=p(null),s=H({hotelId:"",name:"",pageNumber:1,pageSize:10}),o=H({id:"",hotelId:"",name:"",price:"",num:""}),k={name:[{required:!0,message:"请输入名称",trigger:"blur"}],price:[{required:!0,message:"请输入价格",trigger:"blur"}],num:[{required:!0,message:"请输入数量",trigger:"blur"}]},F=a=>{v.value=a.map(e=>e.id)},$=()=>{s.pageNumber=1,c()},c=async()=>{try{console.log("Query Parameters:",{...s,_t:Date.now()});const a=await re({...s,_t:Date.now()});console.log("API Response:",a),a.code===1e3?(w.value=a.data.records||[],z.value=a.data.total||0,x.value=!1):(r.error(a.message),x.value=!1)}catch(a){console.error("Error:",a),r.error("请求失败"),x.value=!1}},L=()=>{s.hotelId="",s.name="",c()},M=a=>{s.pageSize=a,c()},R=a=>{s.pageNumber=a,c()},T=()=>{y.value=!0,o.hotelId=s.hotelId,o.name="",o.price="",o.num=""},j=()=>{C.value.validate(a=>{a&&me(o).then(e=>{e.code===1e3?(r.success("新增成功"),y.value=!1,c()):r.error(e.message)}).catch(e=>{r.error("新增失败")})})},U=()=>{y.value=!1},Q=a=>{E.value=a,b.value=!0,ie({id:a}).then(e=>{e.code===1e3?(o.id=e.data.id,o.name=e.data.name,o.price=e.data.price,o.num=e.data.num):r.error(e.message)}).catch(e=>{r.error("获取数据失败")})},G=()=>{I.value.validate(a=>{a&&pe(o).then(e=>{e.code===1e3?(r.success("修改成功"),b.value=!1,c()):r.error(e.message)}).catch(e=>{r.error("修改失败")})})},B=()=>{b.value=!1},J=()=>{v.value.length!==0&&de.confirm(`确定删除选中的${v.value.length}条数据?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{D(v.value.join(","))}).catch(()=>{})},D=async a=>{try{const e=await ue({ids:a});e.code===1e3?(r.success("删除成功"),c()):r.error(e.message)}catch{r.error("删除失败")}};return ee(()=>{const e=new URLSearchParams(window.location.search).get("id");e?s.hotelId=e:console.error("URL 中没有 id 参数"),c()}),(a,e)=>{const _=d("el-input"),f=d("el-col"),P=d("el-icon"),u=d("el-button"),V=d("el-row"),h=d("el-table-column"),K=d("el-popconfirm"),O=d("el-table"),W=d("el-pagination"),g=d("el-form-item"),S=d("el-form"),N=d("el-dialog"),X=le("loading");return q(),te("div",ce,[i("div",fe,[i("div",_e,[l(V,{gutter:10,style:{padding:"10px"}},{default:t(()=>[l(f,{xs:24,sm:12,md:8,lg:8,xl:8},{default:t(()=>[e[9]||(e[9]=i("span",{class:"search-title"},"名称:",-1)),l(_,{style:{"margin-top":"10px"},size:"mini",placeholder:"请输入名称",modelValue:s.name,"onUpdate:modelValue":e[0]||(e[0]=n=>s.name=n)},null,8,["modelValue"])]),_:1}),l(f,{xs:24,sm:12,md:8,lg:8,xl:8},{default:t(()=>[l(u,{style:{"margin-top":"10px"},size:"mini",type:"primary",onClick:$},{default:t(()=>[l(P,null,{default:t(()=>[l(A(oe))]),_:1}),e[10]||(e[10]=m("查询 "))]),_:1}),l(u,{style:{"margin-top":"10px"},size:"mini",onClick:L},{default:t(()=>[l(P,null,{default:t(()=>[l(A(ae))]),_:1}),e[11]||(e[11]=m("重置 "))]),_:1})]),_:1})]),_:1})]),i("div",ge,[l(V,{style:{"padding-top":"10px","margin-left":"10px"}},{default:t(()=>[l(u,{type:"primary",size:"mini",icon:"Plus",plain:"",onClick:T},{default:t(()=>e[12]||(e[12]=[m("新增")])),_:1}),l(u,{type:"danger",disabled:v.value.length<=0,size:"mini",icon:"Delete",plain:"",onClick:J},{default:t(()=>e[13]||(e[13]=[m("删除")])),_:1},8,["disabled"])]),_:1}),ne((q(),se(O,{data:w.value,onSelectionChange:F,stripe:"",style:{width:"100%"}},{default:t(()=>[l(h,{type:"selection",width:"55"}),l(h,{prop:"name",label:"名称"}),l(h,{prop:"price",label:"价格"}),l(h,{prop:"num",label:"数量"}),l(h,{label:"操作",width:"180"},{default:t(n=>[l(u,{size:"small",type:"success",onClick:Y=>Q(n.row.id)},{default:t(()=>e[14]||(e[14]=[m("修改")])),_:2},1032,["onClick"]),l(K,{"confirm-button-text":"确认","cancel-button-text":"取消","icon-color":"red",title:"确认删除选中的数据？",onConfirm:Y=>D(n.row.id)},{reference:t(()=>[l(u,{size:"small",type:"danger",style:{"margin-left":"5px"}},{default:t(()=>e[15]||(e[15]=[m("删除")])),_:1})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])),[[X,x.value]]),l(W,{background:"",layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,20,50,100],"page-size":s.pageSize,"current-page":s.pageNumber,onSizeChange:M,onCurrentChange:R,total:z.value},null,8,["page-size","current-page","total"])])]),l(N,{title:"新增房型",width:"40%","destroy-on-close":!0,modelValue:y.value,"onUpdate:modelValue":e[4]||(e[4]=n=>y.value=n),"before-close":U},{default:t(()=>[l(S,{model:o,rules:k,ref_key:"addForm",ref:C},{default:t(()=>[l(V,{gutter:10},{default:t(()=>[l(f,{xs:24,sm:24,md:24,lg:24,xl:24},{default:t(()=>[i("div",ve,[l(g,{prop:"name",label:"名称"},{default:t(()=>[l(_,{modelValue:o.name,"onUpdate:modelValue":e[1]||(e[1]=n=>o.name=n),size:"mini",placeholder:"请输入名称",autocomplete:"off"},null,8,["modelValue"])]),_:1})])]),_:1}),l(f,{xs:24,sm:24,md:24,lg:24,xl:24},{default:t(()=>[i("div",ye,[l(g,{prop:"price",label:"价格"},{default:t(()=>[l(_,{type:"number",modelValue:o.price,"onUpdate:modelValue":e[2]||(e[2]=n=>o.price=n),size:"mini",placeholder:"请输入价格",autocomplete:"off"},null,8,["modelValue"])]),_:1})])]),_:1}),l(f,{xs:24,sm:24,md:24,lg:24,xl:24},{default:t(()=>[i("div",be,[l(g,{prop:"num",label:"数量"},{default:t(()=>[l(_,{type:"number",modelValue:o.num,"onUpdate:modelValue":e[3]||(e[3]=n=>o.num=n),size:"mini",placeholder:"请输入数量",autocomplete:"off"},null,8,["modelValue"])]),_:1})])]),_:1})]),_:1})]),_:1},8,["model"]),i("div",he,[l(u,{size:"mini",type:"primary",onClick:j},{default:t(()=>e[16]||(e[16]=[m("确 定")])),_:1}),l(u,{size:"mini",onClick:U},{default:t(()=>e[17]||(e[17]=[m("取 消")])),_:1})])]),_:1},8,["modelValue"]),l(N,{title:"编辑房型",width:"40%","destroy-on-close":!0,modelValue:b.value,"onUpdate:modelValue":e[8]||(e[8]=n=>b.value=n),"before-close":B},{default:t(()=>[l(S,{model:o,rules:k,ref_key:"updateForm",ref:I},{default:t(()=>[l(V,{gutter:10},{default:t(()=>[l(f,{xs:24,sm:24,md:24,lg:24,xl:24},{default:t(()=>[i("div",xe,[l(g,{prop:"name",label:"名称"},{default:t(()=>[l(_,{modelValue:o.name,"onUpdate:modelValue":e[5]||(e[5]=n=>o.name=n),size:"mini",placeholder:"请输入名称",autocomplete:"off"},null,8,["modelValue"])]),_:1})])]),_:1}),l(f,{xs:24,sm:24,md:24,lg:24,xl:24},{default:t(()=>[i("div",Ve,[l(g,{prop:"price",label:"价格"},{default:t(()=>[l(_,{type:"number",modelValue:o.price,"onUpdate:modelValue":e[6]||(e[6]=n=>o.price=n),size:"mini",placeholder:"请输入价格",autocomplete:"off"},null,8,["modelValue"])]),_:1})])]),_:1}),l(f,{xs:24,sm:24,md:24,lg:24,xl:24},{default:t(()=>[i("div",ze,[l(g,{prop:"num",label:"数量"},{default:t(()=>[l(_,{type:"number",modelValue:o.num,"onUpdate:modelValue":e[7]||(e[7]=n=>o.num=n),size:"mini",placeholder:"请输入数量",autocomplete:"off"},null,8,["modelValue"])]),_:1})])]),_:1})]),_:1})]),_:1},8,["model"]),i("div",we,[l(u,{size:"mini",type:"primary",onClick:G},{default:t(()=>e[18]||(e[18]=[m("确 定")])),_:1}),l(u,{size:"mini",onClick:B},{default:t(()=>e[19]||(e[19]=[m("取 消")])),_:1})])]),_:1},8,["modelValue"])])}}},Ue=Z(Ce,[["__scopeId","data-v-b6de288b"]]);export{Ue as default};
