import{_ as C,r as f,c as l,o as r,b as c,a,e as b,w as v,E as k,F as w,s as B,aq as I,ar as x,as as D,at as M,au as T,k as m}from"./index-CQtPEPPp.js";import{_ as u}from"./header-tY05PvXH.js";import"./bg-2-DQ5WRs7S.js";const L="data:image/webp;base64,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",y="/assets/%E7%94%A8%E6%88%B7%E5%A4%B4%E5%83%8F-BiKljDC5.png",V={name:"AiChat",components:{Header:u},data(){return{msgValue:"",msgDom:null,userImg:y,aiImg:L,uploadedImage:null}},computed:{messageList(){return this.$store.state.msg.list||[]}},mounted(){this.msgDom=document.getElementById("message-box"),this.scroll(),window.copyCode=t=>{const i=t.closest(".code-block").querySelector("code").textContent;navigator.clipboard.writeText(i).then(()=>{this.$message({message:"代码已复制到剪贴板",type:"success",duration:2e3}),t.innerHTML='<i class="el-icon-check"></i>',setTimeout(()=>{t.innerHTML='<i class="el-icon-document-copy"></i>'},2e3)}).catch(n=>{this.$message.error("复制失败，请手动复制"),console.error("复制失败:",n)})}},methods:{scroll(){this.$nextTick(()=>{this.msgDom&&(this.msgDom.scrollTop=this.msgDom.scrollHeight)})},handleImageUpload(t){const e=t.target.files[0];if(e){if(!e.type.startsWith("image/")){this.$message.error("请上传图片文件");return}const i=new FileReader;i.onload=n=>{this.uploadedImage=n.target.result,this.$message.success("图片已选择")},i.readAsDataURL(e)}},async submitMsg(){if(!this.msgValue.trim()&&!this.uploadedImage){this.$message.warning("请输入文本或选择图片");return}this.$store.dispatch("msg/userAddMsg",{text:this.msgValue||"请描述图片内容",image:this.uploadedImage}),await this.$store.dispatch("msg/aiAddMsg",{text:this.msgValue||"请描述图片内容",image:this.uploadedImage}),this.msgValue="",this.uploadedImage=null,this.$refs.imageInput.value="",this.scroll()},clearChat(){this.$confirm("确认清除所有对话记录吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$store.commit("msg/CLEAR_MESSAGES"),this.$message({type:"success",message:"对话已清除"}),this.scroll()}).catch(()=>{this.$message({type:"info",message:"已取消清除"})})},processCodeBlocks(t){return t&&(t=t.replace(/<pre><code.*?>([\s\S]*?)<\/code><\/pre>/g,(e,i)=>`
          <div class="code-block">
            <div class="code-header">
              <button class="copy-button" onclick="copyCode(this)">
                <i class="el-icon-document-copy"></i>
              </button>
            </div>
            <pre><code>${i}</code></pre>
          </div>
        `),t=t.replace(/<pre><code class="language-.*?">([\s\S]*?)<\/code><\/pre>/g,(e,i)=>`
          <div class="code-block">
            <div class="code-header">
              <button class="copy-button" onclick="copyCode(this)">
                <i class="el-icon-document-copy"></i>
              </button>
            </div>
            ${e}
          </div>
        `),t)}},watch:{messageList:{handler(){this.scroll()},deep:!0}}},F={class:"ai-chat"},R={class:"chat-container"},q={class:"action-bar"},G={class:"message-container",id:"message-box"},K={class:"message-content"},j={class:"avatar"},z=["src","alt"],E={key:0,class:"assistant-name"},P={class:"bubble"},H=["src"],J=["innerHTML"],N={class:"input-area"};function O(t,e,i,n,d,o){const g=u,p=f("Delete"),h=k;return r(),l("div",null,[c(g),a("div",F,[a("div",R,[a("div",q,[a("button",{class:"clear-button",onClick:e[0]||(e[0]=(...s)=>o.clearChat&&o.clearChat(...s))},[c(h,null,{default:v(()=>[c(p)]),_:1}),e[5]||(e[5]=b(" 清除对话内容 "))])]),a("div",G,[(r(!0),l(w,null,B(o.messageList,(s,A)=>(r(),l("div",{key:A,class:T(["message",s.role==="user"?"message-user":"message-assistant"])},[a("div",K,[a("div",j,[a("img",{src:s.role==="user"?d.userImg:d.aiImg,alt:s.role==="user"?"用户":"AI",class:"avatar-img"},null,8,z),s.role==="assistant"?(r(),l("span",E,"豆包AI")):m("",!0)]),a("div",P,[s.role==="user"&&s.image?(r(),l("img",{key:0,src:s.image,alt:"Uploaded image",class:"uploaded-image"},null,8,H)):m("",!0),a("div",{class:"text",innerHTML:s.content||"暂无内容"},null,8,J)])])],2))),128))]),a("div",N,[I(a("textarea",{class:"message-input",rows:"3",placeholder:"请输入您的问题...","onUpdate:modelValue":e[1]||(e[1]=s=>d.msgValue=s),onKeydown:e[2]||(e[2]=D(M((...s)=>o.submitMsg&&o.submitMsg(...s),["prevent"]),["enter"]))},null,544),[[x,d.msgValue]]),a("input",{type:"file",accept:"image/*",onChange:e[3]||(e[3]=(...s)=>o.handleImageUpload&&o.handleImageUpload(...s)),class:"image-upload",ref:"imageInput"},null,544),a("button",{class:"send-button",onClick:e[4]||(e[4]=(...s)=>o.submitMsg&&o.submitMsg(...s))}," 发送 ")])])])])}const X=C(V,[["render",O],["__scopeId","data-v-50931be5"]]);export{X as default};
