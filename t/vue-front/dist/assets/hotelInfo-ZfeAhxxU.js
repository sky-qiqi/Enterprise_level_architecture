import{_ as w,r as O,c as u,o as m,b as l,a as o,w as a,F as f,s as y,j as V,D as z,G as U,t as n,e as h,H as E,a8 as B,Y as H,Z as D,d as N,$ as F,a9 as S,aa as j,ab as q}from"./index-PRjfuCQ0.js";/* empty css                  *//* empty css                        */import{_ as G}from"./header-D64wlt_7.js";/* empty css                 *//* empty css                         */import"./bg-2-DQ5WRs7S.js";const J={components:{headers:G},data(){return{id:"",dialogVisible:!1,date1:new Date,num:1,peopleList:[{name:"",tel:"",idCard:""}],info:{images:""},hotel:[],radio1:"",pickerOptions:{disabledDate(i){return!1}}}},methods:{toOrder(){this.dialogVisible=!0},closeOrder(){this.date1=new Date,this.num=1,this.radio1="",this.peopleList=[{name:"",tel:"",idCard:""}],this.dialogVisible=!1},handleNumChange(i){if(i>this.peopleList.length){const e=i-this.peopleList.length;for(let d=0;d<e;d++)this.peopleList.push({name:"",tel:"",idCard:""})}else i<this.peopleList.length&&this.peopleList.splice(i)},saveOrder(){for(let e=0;e<this.peopleList.length;e++){const d=this.peopleList[e];if(!d.name){this.$message({message:`请完善预约人${e+1}姓名`,type:"warning"});return}if(!d.tel){this.$message({message:`请完善预约人${e+1}联系方式`,type:"warning"});return}if(!d.idCard){this.$message({message:`请完善预约人${e+1}证件号`,type:"warning"});return}}if(!this.date1){this.$message({message:"请选择预约时间",type:"warning"});return}if(!this.radio1){this.$message({message:"请选择房型",type:"warning"});return}const i={hotelId:this.id,num:this.num,itemId:this.radio1,time:this.date1,people:JSON.stringify(this.peopleList)};q(i).then(e=>{e.code===1e3?(this.$message({message:"预约成功，请等待确认",type:"success"}),this.closeOrder()):this.$message({message:e.message,type:"warning"})})},getHotelById(){j({id:this.id}).then(i=>{i.code===1e3&&(this.info=i.data,this.info.images||(this.info.images=""))})},getHotelItemList(){S({id:this.id}).then(i=>{i.code===1e3&&(this.hotel=i.data)})}},mounted(){this.id=this.$route.query.id,this.getHotelById(),this.getHotelItemList()}},P={class:"attractionsInfo"},R={class:"attractionsInfo1"},T={class:"attractionsInfo2"},Y={class:"attractionsInfo3"},Z=["src"],A={class:"attractionsInfo4"},K={class:"attractionsInfo5"},M={style:{"margin-top":"10px","margin-left":"20px"}},Q={style:{"margin-top":"10px","margin-left":"20px"}},W={class:"attractionsInfo6"},X={class:"attractionsInfo7",style:{"margin-left":"10px"}},$={class:"person-header",style:{"margin-bottom":"5px"}},ee={class:"person-fields"};function te(i,e,d,se,s,c){const C=O("headers"),I=z,x=U,_=E,k=B,v=H,b=D,g=N,L=F;return m(),u("div",P,[l(C),o("div",R,[o("div",T,[o("div",Y,[l(x,{height:"500px"},{default:a(()=>[(m(!0),u(f,null,y(s.info.images.split(","),(t,p)=>(m(),V(I,{key:p},{default:a(()=>[o("img",{style:{width:"100%",height:"100%"},src:t},null,8,Z)]),_:2},1024))),128))]),_:1})]),o("div",A,[o("div",K,n(s.info.name),1),o("div",M," 所属景区："+n(s.info.attractions),1),o("div",Q," 地址："+n(s.info.address),1),o("div",W,n(s.info.introduce),1),o("div",X,[l(_,{size:"small",type:"primary",plain:"",onClick:c.toOrder,style:{"font-size":"18px"}},{default:a(()=>e[4]||(e[4]=[h("立即预定")])),_:1,__:[4]},8,["onClick"])])])])]),l(L,{title:"预定",modelValue:s.dialogVisible,"onUpdate:modelValue":e[3]||(e[3]=t=>s.dialogVisible=t),width:"40%"},{footer:a(()=>[l(_,{onClick:c.closeOrder,size:"small"},{default:a(()=>e[5]||(e[5]=[h("取 消")])),_:1,__:[5]},8,["onClick"]),l(_,{type:"primary",onClick:c.saveOrder,size:"small"},{default:a(()=>e[6]||(e[6]=[h("确 定")])),_:1,__:[6]},8,["onClick"])]),default:a(()=>[o("div",null,[(m(!0),u(f,null,y(s.hotel,(t,p)=>(m(),V(k,{style:{"margin-top":"10px"},key:p,size:"small",modelValue:s.radio1,"onUpdate:modelValue":e[0]||(e[0]=r=>s.radio1=r),label:t.id,border:""},{default:a(()=>[h(n(t.name)+" - 数量"+n(t.num)+" - 价格"+n(t.price),1)]),_:2},1032,["modelValue","label"]))),128))]),l(v,{style:{"margin-top":"10px"},size:"small",modelValue:s.num,"onUpdate:modelValue":e[1]||(e[1]=t=>s.num=t),min:1,max:10,onChange:c.handleNumChange},null,8,["modelValue","onChange"]),l(b,{size:"small",style:{"margin-left":"20px","margin-top":"10px"},modelValue:s.date1,"onUpdate:modelValue":e[2]||(e[2]=t=>s.date1=t),type:"date",placeholder:"选择预定日期","picker-options":s.pickerOptions},null,8,["modelValue","picker-options"]),(m(!0),u(f,null,y(s.peopleList,(t,p)=>(m(),u("div",{class:"attractionsInfo9",key:p,style:{"margin-top":"10px"}},[o("div",$,[o("span",null,"预约人 "+n(p+1),1)]),o("div",ee,[l(g,{size:"small",modelValue:t.name,"onUpdate:modelValue":r=>t.name=r,placeholder:"请输入姓名"},null,8,["modelValue","onUpdate:modelValue"]),l(g,{size:"small",style:{"margin-left":"10px"},modelValue:t.tel,"onUpdate:modelValue":r=>t.tel=r,placeholder:"请输入电话"},null,8,["modelValue","onUpdate:modelValue"]),l(g,{size:"small",style:{"margin-left":"10px"},modelValue:t.idCard,"onUpdate:modelValue":r=>t.idCard=r,placeholder:"请输入身份证号"},null,8,["modelValue","onUpdate:modelValue"])])]))),128))]),_:1},8,["modelValue"])])}const me=w(J,[["render",te],["__scopeId","data-v-6289559a"]]);export{me as default};
