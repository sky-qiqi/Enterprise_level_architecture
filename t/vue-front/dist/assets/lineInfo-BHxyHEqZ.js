import{_ as w,r as f,c as r,o,b as t,a as i,j as c,w as n,F as B,s as C,D as L,k as _,t as x,E,af as D,ag as S,ah as $,ai as A,G as P,H as b}from"./index-PRjfuCQ0.js";/* empty css                         */import{_ as g}from"./ai-BsaaMcx6.js";import{_ as q}from"./header-D64wlt_7.js";import"./bg-2-DQ5WRs7S.js";const H={data(){return{id:"",info:{content:"",name:"",images:null},favor:{},flag:null}},components:{headers:q,ai:g},methods:{removeFavor(){if(!this.favor||!this.favor.id){this.$message.warning("收藏信息异常，无法取消收藏");return}A({ids:this.favor.id}).then(e=>{e.code===1e3?(this.$message({message:"取消收藏成功",type:"success"}),this.getFavor()):this.$message.error(e.msg||"取消收藏失败")}).catch(e=>{this.$message.error("取消收藏请求出错"),console.error("Remove favor API error:",e)})},saveFavor(){if(!this.id){this.$message.warning("缺少商品ID，无法收藏");return}var e={lineId:this.id};$(e).then(a=>{a.code===1e3?(this.$message({message:"收藏成功",type:"success"}),this.getFavor()):this.$message.error(a.msg||"收藏失败")}).catch(a=>{this.$message.error("收藏请求出错"),console.error("Save favor API error:",a)})},getLineById(){if(!this.id){console.warn("ID is not set for getLineById");return}S({id:this.id}).then(e=>{e.code==1e3&&e.data?(this.info=e.data,typeof this.info.images!="string"&&(this.info.images="")):(console.error("Error fetching line info:",e.msg||"Unknown error"),this.$message.error(e.msg||"获取商品详情失败"),this.info={content:"",name:"",images:""})}).catch(e=>{console.error("API request failed for getLineById:",e),this.$message.error("获取商品详情请求出错"),this.info={content:"",name:"",images:""}})},getFavor(){if(!this.id){console.warn("ID is not set for getFavor"),this.flag=!1;return}D({id:this.id}).then(e=>{e.code===1e3&&e.data?(this.favor=e.data,this.flag=!0):(this.flag=!1,this.favor={},e.code!==1e3&&console.warn("Get favor API returned code:",e.code,"Msg:",e.msg))}).catch(e=>{console.error("API request failed for getFavor:",e),this.flag=!1,this.favor={}})}},mounted(){const e=this.$route.query.id;e?(this.id=e,this.getFavor(),this.getLineById()):(console.error("Route parameter 'id' is missing!"),this.$message.error("缺少商品ID，无法显示详情"))}},M={class:"forumInfo"},N={class:"forumInfo1"},V={class:"forumInfo2"},z=["src"],G={key:1,style:{width:"100%",height:"100%","background-color":"#e9e9e9","text-align":"center","line-height":"500px"}},R={key:1},T={key:2},j={class:"forumInfo1"},U={class:"forumInfo2"},J={class:"forumInfo3"},K=["innerHTML"];function O(e,a,Q,W,s,d){const u=g,v=f("headers"),p=L,I=P,y=f("Star"),l=E,h=b,k=f("StarFilled");return o(),r("div",M,[t(u),t(v),i("div",N,[i("div",V,[s.info.images&&s.info.images.length>0?(o(),c(I,{key:0,height:"500px"},{default:n(()=>[(o(!0),r(B,null,C(s.info.images.split(","),(m,F)=>(o(),c(p,{key:F},{default:n(()=>[m?(o(),r("img",{key:0,style:{width:"100%",height:"100%"},src:m},null,8,z)):(o(),r("div",G," 无效图片链接 "))]),_:2},1024))),128))]),_:1})):!s.info.images&&s.id?(o(),r("div",R," 正在加载图片... ")):(o(),r("div",T," 暂无图片 "))])]),i("div",j,[i("div",U,[i("div",J,[i("h1",null,x(s.info.name),1),s.flag===!1?(o(),c(h,{key:0,size:"large",type:"success",circle:"",onClick:d.saveFavor},{default:n(()=>[t(l,null,{default:n(()=>[t(y)]),_:1})]),_:1},8,["onClick"])):_("",!0),s.flag===!0?(o(),c(h,{key:1,size:"large",type:"warning",circle:"",onClick:d.removeFavor},{default:n(()=>[t(l,null,{default:n(()=>[t(l,null,{default:n(()=>[t(k)]),_:1})]),_:1})]),_:1},8,["onClick"])):_("",!0)]),i("div",{class:"forumInfo4",innerHTML:s.info.content},null,8,K)])])])}const se=w(H,[["render",O],["__scopeId","data-v-4b14f15c"]]);export{se as default};
